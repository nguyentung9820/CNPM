   <thead>
     <div id="nav-background">
      <div id="nav-container">
        <header id="nav-header">
          <h1><a href="" id="nav-logo">HOME</a></h1>
        </header>
        <nav>
          <ul class="nav-ul hide-ul">
            <li><a class="nav-link active-link" href="/forum/admin/homepage?id={{adminId}}&username={{adminName}}">Home</a></li>
            <li><a class="nav-link" href="/forum/admin/newpost?id={{adminId}}&username={{adminName}}">Thêm bài mới</a></li>
           
            <li><a class="nav-link" href="/forum/admin/pending?id={{adminId}}&username={{adminName}}">Duyệt bài đăng</a></li>
          </ul>
        </nav>
      </div>
    </div>
  </thead>
  <tbody>
              <h1 id="nameuser"> {{adminName}} </h1>
    {{#each Posts}}
    <div class="form-css">
      <form method="POST" action="/forum/comment/{{this.postID}}">
        <div class="form-group">
          <h1>User Name: {{this.username}}</h1>
        </div>
        <div class="form-group">
          <label for="caption">Nội dung bài viết tại đây</label>
          <h6>{{this.caption}}</h6>
        </div>
        <div class="form-group">
          <img src="{{this.image}}"></img>
     <div id="user-comment-{{this.postID}}">
        {{#each this.arrCmt}}
            <div>
              <h2>
                {{this.username}}
              </h2>
              <li>
                {{this.caption}}
              </li> 
            </div>
          {{/each}}
     </div>

        </div>
      </form>

      {{#if this.allowToCmT}}
        <form id="cmtForm">
          <input name="comment-{{this.postID}}" id="cmtValue-{{this.postID}}" placeholder="Nhập đánh giá"> </input>
        </form>
          <button onclick="postComment('{{this.postID}}')" >Comment</button>
   

      {{/if}}
      {{!-- <a href="/forum/admin/edit/{{this.postID}}">{{this.adminId}}
        <button name="edit-post" class="btn btn-primary">{{this.adminName}}
          Quản lý bài viết{{this.postID}}
        </button>
      </a> --}}
      {{!-- <form action="/forum/admin/editpost?idPost=&username=&idUser=" method="get">
      </form> --}}
         <button class="btn btn-primary" id="forum-post-{{this.postID}}" onclick="onManage('{{this.postID}}')">Quản lý bài viết</button>
    <script>
        function onManage(id)
        {
          window.location.replace("/forum/admin/editpost?idPost="+id+"&username={{this.adminName}}&adminId={{this.adminId}}")
        }
    </script>

    </div>  
    {{/each}}


</tbody>

<script>
  function postComment(postID) {
    
    const request = new XMLHttpRequest();

    request.open("POST", "comment/"+postID);
    request.onreadystatechange = function() {
        if(this.readyState === 4 && this.status === 200) {
            const value = this.responseText;
           // console.log(value);
        }
    };

    const name='{{adminName}}';
    const myCmt = document.getElementById("cmtValue-"+postID);
    const formData = new FormData();
    formData.append('caption',myCmt.value);
    const jsonData=JSON.stringify({caption: myCmt.value,username: name})
    console.log(name);

    request.onload = function(resData)
    {
      const postData=JSON.parse(this.responseText);
      const parentComment= document.getElementById("user-comment-"+postID);
      console.log("parentComment.childElementCount " +parentComment.childElementCount)
      console.log("postData.Cmts.length " +postData.Cmts.length)
      const inputElement= document.getElementById("cmtValue-"+postID);
      inputElement.value='';

      for (let num =parentComment.childElementCount;num<postData.Cmts.length;num++)
     {

      const newDivElement= document.createElement('div');
      const newNameElement= document.createElement('h2');
      const newLiElement= document.createElement('li');
      const textNode= document.createTextNode(postData.Cmts[num].caption);
      const name= document.createTextNode(postData.Cmts[num].username);
      newLiElement.append(textNode);
      newNameElement.append(name);
      newDivElement.appendChild(newNameElement);
      newDivElement.appendChild(newLiElement);

      parentComment.appendChild(newDivElement); 

     //  console.log("resData= " +cmt.caption); 
       }
            
    }
    request.send(jsonData);

}
</script>