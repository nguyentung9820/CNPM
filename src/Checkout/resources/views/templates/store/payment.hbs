<form method="post" action="/checkout/payment/placeorder">
<!--Section: Block Content-->
<section>

  <!--Grid row-->
  <div class="row">

    <!--Grid column-->
    <div class="col-lg-8 mb-4">

      <!-- Card -->
      <div class="card wish-list pb-1">
        <div class="card-body">

          <h5 class="mb-2">Billing details</h5>

          <!-- Grid row -->
          <div class="row">

            <!-- Grid column -->
            <div class="col-lg-6">

              <!-- First name -->
              <div class="md-form md-outline mb-0 mb-lg-4">
                <label for="firstName">First name</label>
                <input type="text" id="firstName" name="billing_firstname" class="form-control mb-0 mb-lg-2">
              </div>

            </div>
            <!-- Grid column -->

            <!-- Grid column -->
            <div class="col-lg-6">

              <!-- Last name -->
              <div class="md-form md-outline">
                <label for="lastName">Last name</label>
                <input type="text" name="billing_lastname" id="lastName" class="form-control">
              </div>

            </div>
            <!-- Grid column -->

          </div>
          <!-- Grid row -->

          <!-- Company name -->
          <div class="md-form md-outline my-0">
            <label for="companyName">Company name (optional)</label>
            <input type="text" name="billing_company" id="companyName" class="form-control mb-0">
          </div>

          <!-- Address Part 1 -->
          <div class="md-form md-outline mt-0">
            <label for="form14">Address</label>
            <input type="text" name="billing_address" id="form14" placeholder="House number and street name" class="form-control">
          </div>

          <!-- Town / City -->
          <div class="md-form md-outline">
            <label for="form17">City</label>
            <input type="text" name="billing_city" id="form17" class="form-control">
          </div>

          <!-- Phone -->
          <div class="md-form md-outline">
            <label for="form18">Phone</label>
            <input type="number" name="billing_phone" id="form18" class="form-control">
          </div>

          <!-- Email address -->
          <div class="md-form md-outline">
            <label for="form19">Email address</label>
            <input type="email" name="billing_email" id="form19" class="form-control">
          </div>

          <!-- Additional information -->
          <div class="md-form md-outline">
            <label for="form76">Additional information</label>
            <textarea id="form76" name="billing_additional" class="md-textarea form-control" rows="4"></textarea>
          </div>
          <!--Section: Block Content-->
          <section style="padding-top: 20px">

            <!--Grid row-->
            <div class="row">

              <!--Grid column-->
              <div class="col-lg-8 mb-4">

                <!-- Card -->
                <div class="card wish-list pb-1">
                  <div class="card-body">

                    <h5 class="mb-2">Shipping details</h5>

                    <!-- Grid row -->
                    <div class="row">

                      <!-- Grid column -->
                      <div class="col-lg-6">

                        <!-- First name -->
                        <div class="md-form md-outline mb-0 mb-lg-4">
                          <label for="firstName">First name</label>
                          <input type="text" name="shipping_firstname" id="firstName" class="form-control mb-0 mb-lg-2">
                        </div>

                      </div>
                      <!-- Grid column -->

                      <!-- Grid column -->
                      <div class="col-lg-6">

                        <!-- Last name -->
                        <div class="md-form md-outline">
                          <label for="lastName">Last name</label>
                          <input type="text" name="shipping_lastname" id="lastName" class="form-control">
                        </div>

                      </div>
                      <!-- Grid column -->

                    </div>
                    <!-- Grid row -->

                    <!-- Address Part 1 -->
                    <div class="md-form md-outline mt-0">
                      <label for="form14">Shipping Address</label>
                      <input type="text" name="shipping_address" id="form14" placeholder="House number and street name" class="form-control">
                    </div>

                    <!-- Town / City -->
                    <div class="md-form md-outline">
                      <label for="form17">City</label>
                      <input type="text" name="shipping_city" id="form17" class="form-control">
                    </div>

                    <!-- Phone -->
                    <div class="md-form md-outline">
                      <label for="form18">Phone</label>
                      <input type="number" name="shipping_phone" id="form18" class="form-control">
                    </div>

                    <!-- Additional information -->
                    <div class="md-form md-outline">
                      <label for="form76">Additional information</label>
                      <textarea id="form76" name="shipping_additional" class="md-textarea form-control" rows="4"></textarea>
                    </div>

                  </div>
                </div>
                <!-- Card -->

              </div>
              <!--Grid column-->
              <div class="col-lg-4">
                <div class="card mb-4">
                  <div class="card-body">
                    <h5 class="mb-3">Shipping Method</h5>
                    <div>We just accept cash on delivery now ( COD )</div>
                    <hr>
                    <div class="form-check">
                      <input class="form-check-input" value="GHTK" type="radio" name="shipping_method" id="flexRadioDefault1">
                      <label class="form-check-label" for="flexRadioDefault1">
                        Giao Hang Tiet Kiem
                      </label>
                      <img width="200px" src="/image/ghtk.png" />
                    </div>
                    <div class="form-check">
                      <input class="form-check-input" type="radio" value="GHN" name="shipping_method" id="flexRadioDefault2" checked>
                      <label class="form-check-label" for="flexRadioDefault2">
                        Giao Hang Nhanh
                      </label>
                      <img width="200px" src="/image/ghn.png" />

                    </div>
                  </div>
                </div>
              </div>

          </section>
          <div class="form-check pl-4 mb-4 mb-lg-0">
            <input type="checkbox" name="create_account" class="form-check-input filled-in" id="new3">
            <label class="form-check-label small text-uppercase card-link-secondary" for="new3">Create an account?</label>
          </div>

        </div>
      </div>
      <!-- Card -->

    </div>
    <!--Grid column-->

    <!--Grid column-->
    <div class="col-lg-4">

      <!-- Card -->
      <div class="card mb-4">
        <div class="card-body">

          <h5 class="mb-3">Items In Cart</h5>

          <ul id='cart' class="list-group list-group-flush">
            <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 pb-0">
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center px-0">
              Shipping
              <span>30</span>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 mb-3">
              <div>
                <strong>Order Total</strong>
                <strong>
                  <p class="mb-0">(including VAT)</p>
                </strong>
              </div>
              <span><strong>$</strong><strong id='total-cart'></strong></span>
            </li>
          </ul>
          <input type="hidden" name="status" value="pending"/>
          <button type="submit" class="btn btn-primary btn-block waves-effect waves-light">Make purchase</button>

        </div>
      </div>
      <!-- Card -->

      <!-- Card -->
      <div class="card mb-4">
        <div class="card-body">

          <a class="dark-grey-text d-flex justify-content-between" data-toggle="collapse" href="#collapseExample"
            aria-expanded="false" aria-controls="collapseExample">
            Add a discount code (optional)
            <span><i class="fas fa-chevron-down pt-1"></i></span>
          </a>

          <div class="collapse" id="collapseExample">
            <div class="mt-3">
              <div class="md-form md-outline mb-0">
                <input type="text" id="discount-code" class="form-control font-weight-light"
                  placeholder="Enter discount code" name="coupon_code">
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Card -->

    </div>
    <!--Grid column-->

  </div>
  <!--Grid row-->

</section>
<div id='hidden'>
</div>
</form>
<!--Section: Block Content-->

<script>
            
            function getCookie(input) {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var name = cookies[i].split('=')[0].toLowerCase();
                var value = cookies[i].split('=')[1].toLowerCase();
                if (name === input) {
                return value;
                } else if (value === input) {
                return name;
                }
            }
            return "";
            };
            data2 = getCookie('checkout');
            array = data2.split(",");
            data = [];
            for(i = 0; i< array.length ; i++){
              data.push([array[i], array[i+1], array[i+2], array[i+3], array[i+4], array[i+5]])
              i += 5;
            }
            console.log(data)
            total_cart = 0;
            data.forEach(
                element => {
                  document.getElementById('cart').insertAdjacentHTML('afterbegin', '<li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 pb-0"><span id="image_in_cart"><img width="100px" height="100px" src="/image/'
                    + element[4] +'"/> </span><span><div><strong id="product_in_cart">' 
                    + element[2] + '</strong></div><div>Qty: <span id="qty_in_cart">'
                    + element[1] +'</span></div></span><span><div><strong>Price:</strong> $'
                    + element[3]*element[1]+'</div></span></li>');
                  total_cart +=  element[3]*element[1];
                  
                }
            )
            document.getElementById('hidden').insertAdjacentHTML('afterbegin', '<input type="hidden" name="products" value="'
                    + data +'"/>')  
            document.getElementById('hidden').insertAdjacentHTML('afterbegin', '<input type="hidden" name="bill_total" value="'
                    + total_cart +'"/>')          
            document.getElementById("total-cart").innerHTML = total_cart;                  

</script>